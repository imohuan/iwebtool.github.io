export const css = "@charset \"UTF-8\";.twinkle[data-v-81c71812]{animation:twinkle-81c71812 .5s infinite alternate}@keyframes twinkle-81c71812{0%{opacity:.8}to{opacity:1}}.range[data-v-81c71812]{-webkit-appearance:none;width:100%;height:3px;background:#ddd;border-radius:5px;outline:none}.range[data-v-81c71812]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:15px;height:15px;background:var(--primary);cursor:pointer;border-radius:50%}.wh-full{width:100%;height:100%}.center{display:flex;align-items:center;justify-content:center}.w-50{width:50px}.bottom-5{bottom:5px}.left-0{left:0}.top-0{top:0}.overflow-hidden{overflow:hidden}.border-2{border-width:2px}.border-dashed{border-style:dashed}.bg-white{background-color:#fff}.opacity-50{opacity:.5}.pointer-events-none{pointer-events:none}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.left-1\\/2{left:50%}.top-1\\/2{top:50%}.-z-20{z-index:-20}.z-50{z-index:50}.hidden{display:none}.h-\\[150px\\]{height:150px}.h-full{height:100%}.min-w30{min-width:7.5rem}.w-4\\/5{width:80%}.w-auto{width:auto}.w2{width:.5rem}.flex{display:flex}.flex-1{flex:1 1 0%}.-translate-x-1\\/2{--un-translate-x:-50%;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}.-translate-y-1\\/2{--un-translate-y:-50%;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}.transform{transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}.items-center{align-items:center}.space-x-2>:not([hidden])~:not([hidden]){--un-space-x-reverse:0;margin-left:calc(.5rem * calc(1 - var(--un-space-x-reverse)));margin-right:calc(.5rem * var(--un-space-x-reverse))}.border{border-width:1px}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.bg-yellow-500{--un-bg-opacity:1;background-color:rgb(234 179 8 / var(--un-bg-opacity))}.hover\\:bg-gray-100:hover{--un-bg-opacity:1;background-color:rgb(243 244 246 / var(--un-bg-opacity))}.p1{padding:.25rem}.px,.px4{padding-left:1rem;padding-right:1rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.shadow{--un-shadow:var(--un-shadow-inset) 0 1px 3px 0 var(--un-shadow-color, rgb(0 0 0 / .1)),var(--un-shadow-inset) 0 1px 2px -1px var(--un-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.outline{outline-style:solid}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}@media (min-width: 768px){.md\\:w-\\[600px\\]{width:600px}}\n\n";
var ce = Object.defineProperty;
var re = (e, o, l) => o in e ? ce(e, o, { enumerable: !0, configurable: !0, writable: !0, value: l }) : e[o] = l;
var U = (e, o, l) => (re(e, typeof o != "symbol" ? o + "" : o, l), l);
import { ref as H, readonly as ie, watch as A, computed as P, markRaw as ue } from "vue";
const { createElementVNode: j, openBlock: de, createElementBlock: pe } = __Context.vue, me = {
  fill: "currentColor",
  t: "1708825661609",
  class: "icon",
  viewBox: "0 0 1024 1024",
  version: "1.1",
  xmlns: "http://www.w3.org/2000/svg",
  "p-id": "6063",
  width: "200",
  height: "200"
}, ve = /* @__PURE__ */ j("path", {
  d: "M896 672c-17.066667 0-32 14.933333-32 32v128c0 6.4-4.266667 10.666667-10.666667 10.666667H170.666667c-6.4 0-10.666667-4.266667-10.666667-10.666667v-128c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v128c0 40.533333 34.133333 74.666667 74.666667 74.666667h682.666666c40.533333 0 74.666667-34.133333 74.666667-74.666667v-128c0-17.066667-14.933333-32-32-32z",
  fill: "currentColor",
  "p-id": "6064"
}, null, -1), fe = /* @__PURE__ */ j("path", {
  d: "M488.533333 727.466667c6.4 6.4 14.933333 8.533333 23.466667 8.533333s17.066667-2.133333 23.466667-8.533333l213.333333-213.333334c12.8-12.8 12.8-32 0-44.8-12.8-12.8-32-12.8-44.8 0l-157.866667 157.866667V170.666667c0-17.066667-14.933333-32-32-32s-34.133333 14.933333-34.133333 32v456.533333L322.133333 469.333333c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l211.2 213.333334z",
  fill: "currentColor",
  "p-id": "6065"
}, null, -1), _e = [
  ve,
  fe
];
function he(e, o) {
  return de(), pe("svg", me, [..._e]);
}
const ge = { name: "defaults-download", render: he }, { createElementVNode: J, openBlock: we, createElementBlock: Ce } = __Context.vue, ye = {
  fill: "currentColor",
  t: "1708825630787",
  class: "icon",
  viewBox: "0 0 1024 1024",
  version: "1.1",
  xmlns: "http://www.w3.org/2000/svg",
  "p-id": "5088",
  width: "200",
  height: "200"
}, ke = /* @__PURE__ */ J("path", {
  d: "M512 170.666667C171.733333 170.666667 0 512 0 512s171.733333 341.333333 512 341.333333 512-341.333333 512-341.333333S853.333333 170.666667 512 170.666667z m0 597.333333C292.693333 768 151.893333 591.786667 99.413333 512 151.893333 432.213333 292.693333 256 512 256s360.106667 176.213333 412.586667 256C872.106667 591.786667 731.306667 768 512 768z",
  fill: "currentColor",
  "p-id": "5089"
}, null, -1), xe = /* @__PURE__ */ J("path", {
  d: "M512 284.373333A227.626667 227.626667 0 1 0 739.626667 512 227.626667 227.626667 0 0 0 512 284.373333z m0 369.92A142.293333 142.293333 0 1 1 654.293333 512 142.293333 142.293333 0 0 1 512 654.293333z",
  fill: "currentColor",
  "p-id": "5090"
}, null, -1), $e = [
  ke,
  xe
];
function Se(e, o) {
  return we(), Ce("svg", ye, [...$e]);
}
const Ee = { name: "defaults-look", render: Se }, { createElementVNode: be, openBlock: Le, createElementBlock: Be } = __Context.vue, Me = {
  fill: "currentColor",
  width: "19",
  height: "9",
  viewBox: "0 0 19 9",
  xmlns: "http://www.w3.org/2000/svg",
  style: { transform: "scale(-1, 1)" }
}, ze = /* @__PURE__ */ be("path", {
  d: "M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1H2ZM1 8H0V9H1V8ZM8 9C8.55228 9 9 8.55229 9 8C9 7.44771 8.55228 7 8 7V9ZM16.5963 7.42809C16.8327 7.92721 17.429 8.14016 17.9281 7.90374C18.4272 7.66731 18.6402 7.07103 18.4037 6.57191L16.5963 7.42809ZM16.9468 5.83205L17.8505 5.40396L16.9468 5.83205ZM0 1V8H2V1H0ZM1 9H8V7H1V9ZM1.66896 8.74329L6.66896 4.24329L5.33104 2.75671L0.331035 7.25671L1.66896 8.74329ZM16.043 6.26014L16.5963 7.42809L18.4037 6.57191L17.8505 5.40396L16.043 6.26014ZM6.65079 4.25926C9.67554 1.66661 14.3376 2.65979 16.043 6.26014L17.8505 5.40396C15.5805 0.61182 9.37523 -0.710131 5.34921 2.74074L6.65079 4.25926Z",
  fill: "currentColor"
}, null, -1), Ve = [
  ze
];
function Re(e, o) {
  return Le(), Be("svg", Me, [...Ve]);
}
const Ne = { name: "defaults-right", render: Re }, { createElementVNode: Fe, openBlock: He, createElementBlock: Ze } = __Context.vue, Te = {
  fill: "currentColor",
  width: "19",
  height: "9",
  viewBox: "0 0 19 9",
  xmlns: "http://www.w3.org/2000/svg"
}, Ie = /* @__PURE__ */ Fe("path", {
  d: "M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1H2ZM1 8H0V9H1V8ZM8 9C8.55228 9 9 8.55229 9 8C9 7.44771 8.55228 7 8 7V9ZM16.5963 7.42809C16.8327 7.92721 17.429 8.14016 17.9281 7.90374C18.4272 7.66731 18.6402 7.07103 18.4037 6.57191L16.5963 7.42809ZM16.9468 5.83205L17.8505 5.40396L16.9468 5.83205ZM0 1V8H2V1H0ZM1 9H8V7H1V9ZM1.66896 8.74329L6.66896 4.24329L5.33104 2.75671L0.331035 7.25671L1.66896 8.74329ZM16.043 6.26014L16.5963 7.42809L18.4037 6.57191L17.8505 5.40396L16.043 6.26014ZM6.65079 4.25926C9.67554 1.66661 14.3376 2.65979 16.043 6.26014L17.8505 5.40396C15.5805 0.61182 9.37523 -0.710131 5.34921 2.74074L6.65079 4.25926Z",
  fill: "currentColor"
}, null, -1), Ue = [
  Ie
];
function We(e, o) {
  return He(), Ze("svg", Te, [...Ue]);
}
const De = { name: "defaults-left", render: We }, { createElementVNode: Ae, openBlock: Pe, createElementBlock: qe } = __Context.vue, Xe = {
  width: "1.5rem",
  height: "1.5rem",
  fill: "currentColor",
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  "stroke-width": "1.5",
  stroke: "currentColor",
  "aria-hidden": "true"
}, Ye = /* @__PURE__ */ Ae("path", {
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  d: "M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"
}, null, -1), Oe = [
  Ye
];
function Ge(e, o) {
  return Pe(), qe("svg", Xe, [...Oe]);
}
const je = { name: "defaults-full", render: Ge }, { createElementVNode: Je, openBlock: Ke, createElementBlock: Qe } = __Context.vue, et = {
  fill: "currentColor",
  t: "1708828335213",
  class: "icon",
  viewBox: "0 0 1098 1024",
  version: "1.1",
  xmlns: "http://www.w3.org/2000/svg",
  "p-id": "4230",
  width: "200",
  height: "200"
}, tt = /* @__PURE__ */ Je("path", {
  d: "M365.717333 329.152q0 45.717333-32 77.717333t-77.717333 32-77.717333-32-32-77.717333 32-77.717333 77.717333-32 77.717333 32 32 77.717333zM950.848 548.565333l0 256-804.565333 0 0-109.717333 182.848-182.848 91.434667 91.434667 292.565333-292.565333zM1005.717333 146.282667l-914.282667 0q-7.424 0-12.864 5.418667t-5.418667 12.864l0 694.848q0 7.424 5.418667 12.864t12.864 5.418667l914.282667 0q7.424 0 12.864-5.418667t5.418667-12.864l0-694.848q0-7.424-5.418667-12.864t-12.864-5.418667zM1097.152 164.565333l0 694.848q0 37.717333-26.858667 64.576t-64.576 26.858667l-914.282667 0q-37.717333 0-64.576-26.858667t-26.858667-64.576l0-694.848q0-37.717333 26.858667-64.576t64.576-26.858667l914.282667 0q37.717333 0 64.576 26.858667t26.858667 64.576z",
  fill: "#222222",
  "p-id": "4231"
}, null, -1), nt = [
  tt
];
function ot(e, o) {
  return Ke(), Qe("svg", et, [...nt]);
}
const st = { name: "defaults-image", render: ot };
typeof WorkerGlobalScope < "u" && globalThis instanceof WorkerGlobalScope;
const lt = () => +Date.now();
function at(e, o) {
  function l(...p) {
    return new Promise((u, a) => {
      Promise.resolve(e(() => o.apply(this, p), { fn: o, thisArg: this, args: p })).then(u).catch(a);
    });
  }
  return l;
}
const K = (e) => e();
function ct(e = K) {
  const o = H(!0);
  function l() {
    o.value = !1;
  }
  function p() {
    o.value = !0;
  }
  const u = (...a) => {
    o.value && e(...a);
  };
  return { isActive: ie(o), pause: l, resume: p, eventFilter: u };
}
function rt(e, o, l = {}) {
  const {
    eventFilter: p = K,
    ...u
  } = l, a = at(
    p,
    o
  );
  let y, f, c;
  if (u.flush === "sync") {
    const m = H(!1);
    f = () => {
    }, y = (n) => {
      m.value = !0, n(), m.value = !1;
    }, c = A(
      e,
      (...n) => {
        m.value || a(...n);
      },
      u
    );
  } else {
    const m = [], n = H(0), s = H(0);
    f = () => {
      n.value = s.value;
    }, m.push(
      A(
        e,
        () => {
          s.value++;
        },
        { ...u, flush: "sync" }
      )
    ), y = (r) => {
      const v = s.value;
      r(), n.value += s.value - v;
    }, m.push(
      A(
        e,
        (...r) => {
          const v = n.value > 0 && n.value === s.value;
          n.value = 0, s.value = 0, !v && a(...r);
        },
        u
      )
    ), c = () => {
      m.forEach((r) => r());
    };
  }
  return { stop: c, ignoreUpdates: y, ignorePrevAsyncUpdates: f };
}
function Q(e) {
  return JSON.parse(JSON.stringify(e));
}
function ee(e) {
  return e;
}
function it(e, o) {
  return e.value = o;
}
function ut(e) {
  return e ? typeof e == "function" ? e : Q : ee;
}
function dt(e) {
  return e ? typeof e == "function" ? e : Q : ee;
}
function pt(e, o = {}) {
  const {
    clone: l = !1,
    dump: p = ut(l),
    parse: u = dt(l),
    setSource: a = it
  } = o;
  function y() {
    return ue({
      snapshot: p(e.value),
      timestamp: lt()
    });
  }
  const f = H(y()), c = H([]), m = H([]), n = ($) => {
    a(e, u($.snapshot)), f.value = $;
  }, s = () => {
    c.value.unshift(f.value), f.value = y(), o.capacity && c.value.length > o.capacity && c.value.splice(o.capacity, Number.POSITIVE_INFINITY), m.value.length && m.value.splice(0, m.value.length);
  }, r = () => {
    c.value.splice(0, c.value.length), m.value.splice(0, m.value.length);
  }, v = () => {
    const $ = c.value.shift();
    $ && (m.value.unshift(f.value), n($));
  }, w = () => {
    const $ = m.value.shift();
    $ && (c.value.unshift(f.value), n($));
  }, B = () => {
    n(f.value);
  }, x = P(() => [f.value, ...c.value]), M = P(() => c.value.length > 0), z = P(() => m.value.length > 0);
  return {
    source: e,
    undoStack: c,
    redoStack: m,
    last: f,
    history: x,
    canUndo: M,
    canRedo: z,
    clear: r,
    commit: s,
    reset: B,
    undo: v,
    redo: w
  };
}
function mt(e, o = {}) {
  const {
    deep: l = !1,
    flush: p = "pre",
    eventFilter: u
  } = o, {
    eventFilter: a,
    pause: y,
    resume: f,
    isActive: c
  } = ct(u), {
    ignoreUpdates: m,
    ignorePrevAsyncUpdates: n,
    stop: s
  } = rt(
    e,
    x,
    { deep: l, flush: p, eventFilter: a }
  );
  function r(V, N) {
    n(), m(() => {
      V.value = N;
    });
  }
  const v = pt(e, { ...o, clone: o.clone || l, setSource: r }), { clear: w, commit: B } = v;
  function x() {
    n(), B();
  }
  function M(V) {
    f(), V && x();
  }
  function z(V) {
    let N = !1;
    const d = () => N = !0;
    m(() => {
      V(d);
    }), N || x();
  }
  function $() {
    s(), w();
  }
  return {
    ...v,
    isTracking: c,
    pause: y,
    resume: M,
    commit: x,
    batch: z,
    dispose: $
  };
}
const { defineComponent: vt } = __Context.vue, { renderSlot: ft, normalizeStyle: _t, createElementVNode: ht, openBlock: gt, createElementBlock: wt } = __Context.vue, { reactive: Ct, computed: yt, ref: Y, onMounted: kt } = __Context.vue, xt = /* @__PURE__ */ vt({
  __name: "CanvasContainer",
  props: {
    imageSize: {}
  },
  setup(e, { expose: o }) {
    const l = e, p = Y(), u = Y(), a = Ct({ x: 0, y: 0, scale: 1 }), y = yt(() => `transform-origin: 0 0; transform: translate(${a.x}px, ${a.y}px) scale(${a.scale})`), f = (n) => {
      n.preventDefault();
      let s = n.deltaY < 0 ? 1.1 : 0.9;
      const r = a.scale * s;
      r < 0.5 ? s = 0.5 / a.scale : r > 3 && (s = 3 / a.scale), a.scale *= s;
      const v = u.value.getBoundingClientRect(), w = n.clientX - v.left, B = n.clientY - v.top;
      a.x -= w * (s - 1), a.y -= B * (s - 1);
    };
    let c = !1;
    return kt(() => {
      if (!u.value)
        return;
      window.addEventListener("keydown", function(r) {
        r.code === "Space" && !c && (c = !0, u.value.style.cursor = "grabbing", document.addEventListener("mousemove", n), document.addEventListener("mouseup", s), document.addEventListener("keyup", s));
      });
      function n(r) {
        c && (a.x += r.movementX, a.y += r.movementY);
      }
      function s() {
        c && (c = !1, u.value.style.cursor = "grab", document.removeEventListener("mousemove", n), document.removeEventListener("mouseup", s), document.removeEventListener("keyup", s));
      }
    }), o({ resetScale: () => {
      if (a.scale = 1, a.x = 0, a.y = 0, !u.value)
        return;
      const [n, s] = l.imageSize, { width: r, height: v } = p.value.getBoundingClientRect(), w = r / n, B = v / s, x = Math.min(w, B) - 0.1;
      a.scale = x;
      const M = n * x, z = s * x;
      a.x = (n - M) / 2, a.y = (s - z) / 2;
    } }), (n, s) => (gt(), wt("div", {
      ref_key: "elRef",
      ref: p,
      class: "wh-full relative center",
      onWheel: f
    }, [
      ht("div", {
        ref_key: "moveRef",
        ref: u,
        style: _t(y.value)
      }, [
        ft(n.$slots, "default")
      ], 4)
    ], 544));
  }
}), { defineComponent: $t } = __Context.vue, { createElementVNode: O, vShow: St, normalizeStyle: Et, withDirectives: bt, Fragment: Lt, openBlock: Bt, createElementBlock: Mt } = __Context.vue, { ref: q, reactive: zt, computed: Vt } = __Context.vue, Rt = /* @__PURE__ */ $t({
  __name: "CanvasLama",
  props: {
    src: {},
    size: {}
  },
  emits: ["recognize"],
  setup(e, { expose: o, emit: l }) {
    const p = e, u = l, a = q(), y = q(!1), f = q(!1), c = zt({ x: 0, y: 0 }), m = Vt(() => `transform: translate(${c.x}px, ${c.y}px) `);
    let n, s, r = null;
    const v = document.createElement("canvas"), w = v.getContext("2d");
    v.style.display = "none", document.body.appendChild(v);
    const B = (d, h = "pic.jpg") => new Promise((E, b) => {
      const C = new XMLHttpRequest();
      C.open("GET", d), C.responseType = "blob", C.onload = function() {
        if (C.status === 200) {
          const g = C.response, _ = new File([g], h, { type: "image/webp" });
          E(_);
        } else
          b(new Error("Failed to load blob data"));
      }, C.onerror = function() {
        b(new Error("XHR request failed"));
      }, C.send();
    }), x = (d) => {
      let h = d.split(","), E = h[0].match(/:(.*?);/)[1], b = atob(h[1]), C = b.length, g = new Uint8Array(C);
      for (; C--; )
        g[C] = b.charCodeAt(C);
      return { u8arr: g, mime: E };
    }, M = (d) => {
      try {
        s.lineWidth = d, w.lineWidth = d;
      } catch {
      }
    }, z = () => {
      let d = !1, h = 0, E = 0;
      n.addEventListener("mousedown", (g) => {
        d = !0, [h, E] = [g.offsetX, g.offsetY];
      });
      const b = (g, _, i, t) => {
        g.globalCompositeOperation = y.value ? "destination-out" : "source-over", g.save(), g.beginPath(), g.moveTo(_, i), g.lineTo(t.offsetX, t.offsetY), g.stroke(), g.restore();
      };
      n.addEventListener("mousemove", (g) => {
        d && (b(s, h, E, g), b(w, h, E, g), [h, E] = [g.offsetX, g.offsetY]);
      });
      const C = () => {
        d && (r && clearTimeout(r), r = setTimeout(() => u("recognize"), 1e3), d = !1);
      };
      n.addEventListener("mouseup", C), n.addEventListener("mouseout", C);
    }, $ = () => {
      n.addEventListener("mouseenter", () => f.value = !0), n.addEventListener("mouseleave", () => f.value = !1), n.addEventListener("mousedown", () => f.value = !1), n.addEventListener("mousemove", (d) => {
        const h = p.size / 2;
        c.x = d.offsetX - h, c.y = d.offsetY - h;
      });
    };
    return o({ initCanvas: (d, h) => {
      v.width = d, v.height = h, w.fillRect(0, 0, d, h), w.fillStyle = "#000000", w.lineCap = "round", w.lineJoin = "round", w.lineWidth = 20, w.fillStyle = "white", w.strokeStyle = "white", n = a.value, s = n.getContext("2d"), n.width = d, n.height = h, s.lineCap = "round", s.lineJoin = "round", s.lineWidth = 20, s.fillStyle = "rgba(64, 204, 51)", s.strokeStyle = "rgba(64, 204, 51)", z(), $();
    }, setLineWidth: M, getFiles: async () => {
      const d = await B(p.src), h = v.toDataURL("image/png"), E = x(h), b = new File([E.u8arr], "blob", { type: "image/png" });
      return [d, b];
    } }), (d, h) => (Bt(), Mt(Lt, null, [
      O("canvas", {
        ref_key: "canvasRef",
        ref: a,
        class: "custom-cursor1 opacity-50"
      }, null, 512),
      bt(O("div", {
        class: "absolute left-0 top-0 z-50 rounded-full pointer-events-none",
        style: Et(["background: rgba(64, 204, 51, 0.5)", `width: ${d.size}px; height: ${d.size}px`, m.value])
      }, null, 4), [
        [St, f.value]
      ])
    ], 64));
  }
}), { defineComponent: Nt } = __Context.vue, { normalizeStyle: W, createElementVNode: k, unref: T, vShow: X, withDirectives: D, createVNode: S, normalizeClass: I, withCtx: F, vModelText: Ft, resolveComponent: Ht, openBlock: G, createBlock: Zt, createCommentVNode: Tt, createElementBlock: It, pushScopeId: Ut, popScopeId: Wt } = __Context.vue, te = (e) => (Ut("data-v-81c71812"), e = e(), Wt(), e), Dt = ["src"], At = ["src"], Pt = { class: "absolute inset-0 center" }, qt = ["for"], Xt = /* @__PURE__ */ te(() => /* @__PURE__ */ k("div", { class: "wh-full rounded center border-2 border-dashed hover:bg-gray-100" }, "点击这里或拖动图像文件", -1)), Yt = ["id"], Ot = { class: "absolute left-1/2 -translate-x-1/2 bottom-5 rounded-md border p1 w-auto bg-white shadow" }, Gt = { class: "flex space-x-2 items-center px4" }, jt = { class: "min-w30 h-full center" }, Jt = /* @__PURE__ */ te(() => /* @__PURE__ */ k("span", { class: "w-50" }, "笔刷", -1)), Kt = { class: "flex" }, { request: Qt } = __Context.utils, { ref: L, reactive: en, computed: tn } = __Context.vue, { nextTick: nn } = __Context.vue, on = /* @__PURE__ */ Nt({
  __name: "Main",
  setup(e) {
    const o = L("image_file_" + Math.random().toString().slice(3)), l = L(), p = L(40), u = L(!1), a = L(!1), y = L(!1), f = L(), c = L(), m = L([0, 0]), n = L(), s = L(), r = L(), v = en({ width: "0px", height: "0px" }), { undo: w, redo: B, clear: x, canUndo: M, canRedo: z, history: $ } = mt(l, {}), V = tn(() => {
      const _ = $.value.map((i) => i.snapshot).filter((i) => i);
      return _[_.length - 1];
    }), N = (_) => new Promise((i) => {
      const t = new Image();
      t.onload = () => i({ width: t.width, height: t.height }), t.src = _;
    }), d = () => {
      r.value.setLineWidth(p.value);
    }, h = () => {
      N(l.value).then(({ width: _, height: i }) => {
        v.width = _ + "px", v.height = i + "px", m.value = [_, i], r.value.initCanvas(_, i), r.value.setLineWidth(p.value), nn().then(() => s.value.resetScale());
      });
    }, E = (_) => {
      const i = Array.from(_.target.files);
      if (i.length === 0)
        return;
      const t = i[0];
      l.value = URL.createObjectURL(t), x(), h();
    }, b = () => {
      s.value.resetScale();
    }, C = async () => {
      const [_, i] = await r.value.getFiles(), t = new FormData();
      t.append("image", _), t.append("mask", i), t.append("ldmSteps", "25"), t.append("ldmSampler", "plms"), t.append("zitsWireframe", "true"), t.append("hdStrategy", "Crop"), t.append("hdStrategyCropMargin", "196"), t.append("hdStrategyCropTrigerSize", "800"), t.append("hdStrategyResizeLimit", "2048"), t.append("prompt", ""), t.append("negativePrompt", "0"), t.append("croperX", "-52"), t.append("croperY", "-52"), t.append("croperWidth", "512"), t.append("croperHeight", "512"), t.append("useCroper", "false"), t.append("sdMaskBlur", "5"), t.append("sdStrength", "0.75"), t.append("sdSteps", "50"), t.append("sdGuidanceScale", "7.5"), t.append("sdSampler", "uni_pc"), t.append("sdSeed", "-1"), t.append("sdMatchHistograms", "false"), t.append("sdScale", "1"), t.append("cv2Radius", "5"), t.append("cv2Flag", "INPAINT_NS"), t.append("paintByExampleSteps", "50"), t.append("paintByExampleGuidanceScale", "7.5"), t.append("paintByExampleSeed", "-1"), t.append("paintByExampleMaskBlur", "5"), t.append("paintByExampleMatchHistograms", "false"), t.append("p2pSteps", "50"), t.append("p2pImageGuidanceScale", "1.5"), t.append("p2pGuidanceScale", "7.5"), t.append("controlnet_conditioning_scale", "0.4"), t.append("controlnet_method", "control_v11p_sd15_canny"), u.value = !0, Qt("http://lama.fyshark.com/inpaint", {
        method: "post",
        headers: { pragma: "no-cache", "cache-control": "no-cache" },
        data: t,
        responseType: "blob"
      }).then((R) => {
        l.value = URL.createObjectURL(R), h();
      }).finally(() => u.value = !1);
    }, g = () => {
      const _ = document.createElement("a");
      _.href = l.value, _.download = Math.random().toString().slice(3) + ".jpg", document.body.appendChild(_), _.click(), document.body.removeChild(_);
    };
    return (_, i) => {
      const t = st, R = Ht("i-icon-tip"), ne = je, oe = De, se = Ne, le = Ee, ae = ge;
      return G(), It("div", {
        ref_key: "elRef",
        ref: f,
        class: "wh-full overflow-hidden relative"
      }, [
        S(xt, {
          imageSize: m.value,
          ref_key: "containerRef",
          ref: s
        }, {
          default: F(() => [
            k("div", {
              ref_key: "boxRef",
              ref: c,
              class: I(["relative overflow-hidden", { twinkle: u.value }]),
              style: W(v)
            }, [
              k("img", {
                src: l.value,
                class: "absolute inset-0 -z-0",
                style: W(`clip-path: inset(0px ${a.value ? 100 : 0}% 0px 0px); transition: clip-path 300ms cubic-bezier(0.4, 0, 0.2, 1) 0s`),
                draggable: "false"
              }, null, 12, Dt),
              k("img", {
                src: V.value,
                class: "absolute inset-0 -z-20",
                draggable: "false"
              }, null, 8, At),
              D(k("div", {
                class: "absolute top-0 w2 bg-yellow-500 h-full",
                style: W(`left: ${a.value ? 0 : 102}%;transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0s`)
              }, null, 4), [
                [X, T(M)]
              ]),
              S(Rt, {
                src: l.value,
                size: p.value,
                ref_key: "canvasLamaRef",
                ref: r,
                class: "wh-full",
                onRecognize: C
              }, null, 8, ["src", "size"]),
              D(k("div", {
                class: "fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 rounded-full pointer-events-none",
                style: W(["background: rgba(64, 204, 51, 0.5)", `width: ${p.value}px; height: ${p.value}px`])
              }, null, 4), [
                [X, y.value]
              ])
            ], 6)
          ]),
          _: 1
        }, 8, ["imageSize"]),
        D(k("div", Pt, [
          k("label", {
            for: o.value,
            class: "w-4/5 md:w-[600px] h-[150px]"
          }, [
            Xt,
            k("input", {
              ref_key: "inputFileRef",
              ref: n,
              class: "hidden",
              id: o.value,
              type: "file",
              accept: "image/png, image/jpeg",
              onChange: E
            }, null, 40, Yt)
          ], 8, qt)
        ], 512), [
          [X, !l.value]
        ]),
        k("div", Ot, [
          k("div", Gt, [
            k("div", jt, [
              Jt,
              D(k("input", {
                class: "range flex-1",
                "onUpdate:modelValue": i[0] || (i[0] = (Z) => p.value = Z),
                onMousedown: i[1] || (i[1] = (Z) => y.value = !0),
                onMouseup: i[2] || (i[2] = (Z) => y.value = !1),
                onChange: d,
                type: "range",
                step: "2",
                min: "10",
                max: "200"
              }, null, 544), [
                [Ft, p.value]
              ])
            ]),
            k("div", Kt, [
              l.value ? (G(), Zt(R, {
                key: 0,
                class: "center",
                onClick: i[3] || (i[3] = (Z) => n.value.click())
              }, {
                default: F(() => [
                  S(t)
                ]),
                _: 1
              })) : Tt("", !0),
              S(R, {
                class: I(["center", { "pointer-events-none": !l.value }]),
                onClick: b
              }, {
                default: F(() => [
                  S(ne)
                ]),
                _: 1
              }, 8, ["class"]),
              S(R, {
                class: I(["center", { "pointer-events-none": !T(M) }]),
                onClick: T(w)
              }, {
                default: F(() => [
                  S(oe)
                ]),
                _: 1
              }, 8, ["class", "onClick"]),
              S(R, {
                class: I(["center", { "pointer-events-none": !T(z) }]),
                onClick: T(B)
              }, {
                default: F(() => [
                  S(se)
                ]),
                _: 1
              }, 8, ["class", "onClick"]),
              S(R, {
                class: I(["center", { "pointer-events-none": !T(M) }]),
                onMousedown: i[4] || (i[4] = (Z) => a.value = !0),
                onMouseup: i[5] || (i[5] = (Z) => a.value = !1)
              }, {
                default: F(() => [
                  S(le)
                ]),
                _: 1
              }, 8, ["class"]),
              S(R, {
                class: I(["center", { "pointer-events-none": !l.value }]),
                onClick: g
              }, {
                default: F(() => [
                  S(ae)
                ]),
                _: 1
              }, 8, ["class"])
            ])
          ])
        ])
      ], 512);
    };
  }
}), sn = (e, o) => {
  const l = e.__vccOpts || e;
  for (const [p, u] of o)
    l[p] = u;
  return l;
}, ln = /* @__PURE__ */ sn(on, [["__scopeId", "data-v-81c71812"]]);
class an {
  constructor() {
    U(this, "icon", "");
    U(this, "name", "lama");
    U(this, "description", "lama");
    U(this, "isUninstallReload", !1);
  }
  install(o) {
    o.usePage({
      path: "/lama",
      name: "lama",
      meta: {
        title: "lama",
        content: "图片涂抹修复",
        icon: '<svg t="1706251360855" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4209" width="200" height="200"><path d="M323.008 786.752c-52.928 0-96-43.072-96-96s43.072-96 96-96 96 43.072 96 96S375.936 786.752 323.008 786.752zM323.008 658.752c-17.632 0-32 14.336-32 32s14.368 32 32 32 32-14.336 32-32S340.64 658.752 323.008 658.752zM416.096 927.072 284.224 927.072c-159.936 0-186.912-59.232-186.912-192l0-140.8c0-74.272 14.304-96.256 70.72-150.976l327.04-319.904c36.576-35.488 105.888-35.392 142.304-0.096l263.072 256.032c18.336 17.792 28.864 43.552 28.864 70.656 0 27.296-10.656 53.28-29.248 71.264l-290.016 294.592C544.544 880.416 497.216 927.072 416.096 927.072zM566.24 159.488c-10.496 0-20.16 3.52-26.528 9.696l-327.04 319.936c-49.952 48.48-51.36 54.528-51.36 105.152l0 140.8c0 110.272 8.352 128 122.912 128l131.872 0c52.672 0 83.744-28.48 148.992-92.8l26.656-26.144 263.232-268.256c6.784-6.592 10.336-15.808 10.336-25.888 0-9.888-3.424-18.88-9.472-24.736l-263.072-256.032C586.432 163.04 576.736 159.488 566.24 159.488z" fill="#272636" p-id="4210"></path></svg>',
        cache: !0
      },
      component: ln
    });
  }
  uninstall() {
  }
}
const un = new an();
export {
  un as default
};
