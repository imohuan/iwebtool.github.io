export const css = "@charset \"UTF-8\";.twinkle[data-v-d98fa39c]{animation:twinkle-d98fa39c .5s infinite alternate}@keyframes twinkle-d98fa39c{0%{opacity:.8}to{opacity:1}}.range[data-v-d98fa39c]{-webkit-appearance:none;width:100%;height:3px;background:#ddd;border-radius:5px;outline:none}.range[data-v-d98fa39c]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:15px;height:15px;background:var(--primary);cursor:pointer;border-radius:50%}.wh-full{width:100%;height:100%}.center{display:flex;align-items:center;justify-content:center}.w-50{width:50px}.bottom-5{bottom:5px}.left-0{left:0}.top-0{top:0}.overflow-hidden{overflow:hidden}.border-2{border-width:2px}.border-dashed{border-style:dashed}.bg-white{background-color:#fff}.opacity-50{opacity:.5}.pointer-events-none{pointer-events:none}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.left-1\\/2{left:50%}.top-1\\/2{top:50%}.-z-20{z-index:-20}.z-50{z-index:50}.hidden{display:none}.h-\\[150px\\]{height:150px}.h-full{height:100%}.min-w30{min-width:7.5rem}.w-4\\/5{width:80%}.w-auto{width:auto}.w2{width:.5rem}.flex{display:flex}.flex-1{flex:1 1 0%}.-translate-x-1\\/2{--un-translate-x:-50%;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}.-translate-y-1\\/2{--un-translate-y:-50%;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}.transform{transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}.items-center{align-items:center}.space-x-2>:not([hidden])~:not([hidden]){--un-space-x-reverse:0;margin-left:calc(.5rem * calc(1 - var(--un-space-x-reverse)));margin-right:calc(.5rem * var(--un-space-x-reverse))}.border{border-width:1px}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.bg-yellow-500{--un-bg-opacity:1;background-color:rgb(234 179 8 / var(--un-bg-opacity))}.hover\\:bg-gray-100:hover{--un-bg-opacity:1;background-color:rgb(243 244 246 / var(--un-bg-opacity))}.p1{padding:.25rem}.px,.px4{padding-left:1rem;padding-right:1rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.shadow{--un-shadow:var(--un-shadow-inset) 0 1px 3px 0 var(--un-shadow-color, rgb(0 0 0 / .1)),var(--un-shadow-inset) 0 1px 2px -1px var(--un-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.outline{outline-style:solid}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}@media (min-width: 768px){.md\\:w-\\[600px\\]{width:600px}}\n\n";
var ce = Object.defineProperty;
var re = (c, l, r) => l in c ? ce(c, l, { enumerable: !0, configurable: !0, writable: !0, value: r }) : c[l] = r;
var F = (c, l, r) => (re(c, typeof l != "symbol" ? l + "" : l, r), r);
const { createElementVNode: Q, openBlock: ie, createElementBlock: de } = __Context.vue, pe = {
  fill: "currentColor",
  t: "1708825661609",
  class: "icon",
  viewBox: "0 0 1024 1024",
  version: "1.1",
  xmlns: "http://www.w3.org/2000/svg",
  "p-id": "6063",
  width: "200",
  height: "200"
}, ue = /* @__PURE__ */ Q("path", {
  d: "M896 672c-17.066667 0-32 14.933333-32 32v128c0 6.4-4.266667 10.666667-10.666667 10.666667H170.666667c-6.4 0-10.666667-4.266667-10.666667-10.666667v-128c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v128c0 40.533333 34.133333 74.666667 74.666667 74.666667h682.666666c40.533333 0 74.666667-34.133333 74.666667-74.666667v-128c0-17.066667-14.933333-32-32-32z",
  fill: "currentColor",
  "p-id": "6064"
}, null, -1), me = /* @__PURE__ */ Q("path", {
  d: "M488.533333 727.466667c6.4 6.4 14.933333 8.533333 23.466667 8.533333s17.066667-2.133333 23.466667-8.533333l213.333333-213.333334c12.8-12.8 12.8-32 0-44.8-12.8-12.8-32-12.8-44.8 0l-157.866667 157.866667V170.666667c0-17.066667-14.933333-32-32-32s-34.133333 14.933333-34.133333 32v456.533333L322.133333 469.333333c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l211.2 213.333334z",
  fill: "currentColor",
  "p-id": "6065"
}, null, -1), _e = [
  ue,
  me
];
function ve(c, l) {
  return ie(), de("svg", pe, [..._e]);
}
const fe = { name: "defaults-download", render: ve }, { createElementVNode: ee, openBlock: he, createElementBlock: ge } = __Context.vue, we = {
  fill: "currentColor",
  t: "1708825630787",
  class: "icon",
  viewBox: "0 0 1024 1024",
  version: "1.1",
  xmlns: "http://www.w3.org/2000/svg",
  "p-id": "5088",
  width: "200",
  height: "200"
}, Ce = /* @__PURE__ */ ee("path", {
  d: "M512 170.666667C171.733333 170.666667 0 512 0 512s171.733333 341.333333 512 341.333333 512-341.333333 512-341.333333S853.333333 170.666667 512 170.666667z m0 597.333333C292.693333 768 151.893333 591.786667 99.413333 512 151.893333 432.213333 292.693333 256 512 256s360.106667 176.213333 412.586667 256C872.106667 591.786667 731.306667 768 512 768z",
  fill: "currentColor",
  "p-id": "5089"
}, null, -1), xe = /* @__PURE__ */ ee("path", {
  d: "M512 284.373333A227.626667 227.626667 0 1 0 739.626667 512 227.626667 227.626667 0 0 0 512 284.373333z m0 369.92A142.293333 142.293333 0 1 1 654.293333 512 142.293333 142.293333 0 0 1 512 654.293333z",
  fill: "currentColor",
  "p-id": "5090"
}, null, -1), ke = [
  Ce,
  xe
];
function $e(c, l) {
  return he(), ge("svg", we, [...ke]);
}
const ye = { name: "defaults-look", render: $e }, { createElementVNode: Ee, openBlock: Le, createElementBlock: Se } = __Context.vue, be = {
  fill: "currentColor",
  width: "19",
  height: "9",
  viewBox: "0 0 19 9",
  xmlns: "http://www.w3.org/2000/svg",
  style: { transform: "scale(-1, 1)" }
}, Be = /* @__PURE__ */ Ee("path", {
  d: "M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1H2ZM1 8H0V9H1V8ZM8 9C8.55228 9 9 8.55229 9 8C9 7.44771 8.55228 7 8 7V9ZM16.5963 7.42809C16.8327 7.92721 17.429 8.14016 17.9281 7.90374C18.4272 7.66731 18.6402 7.07103 18.4037 6.57191L16.5963 7.42809ZM16.9468 5.83205L17.8505 5.40396L16.9468 5.83205ZM0 1V8H2V1H0ZM1 9H8V7H1V9ZM1.66896 8.74329L6.66896 4.24329L5.33104 2.75671L0.331035 7.25671L1.66896 8.74329ZM16.043 6.26014L16.5963 7.42809L18.4037 6.57191L17.8505 5.40396L16.043 6.26014ZM6.65079 4.25926C9.67554 1.66661 14.3376 2.65979 16.043 6.26014L17.8505 5.40396C15.5805 0.61182 9.37523 -0.710131 5.34921 2.74074L6.65079 4.25926Z",
  fill: "currentColor"
}, null, -1), Me = [
  Be
];
function ze(c, l) {
  return Le(), Se("svg", be, [...Me]);
}
const Ve = { name: "defaults-right", render: ze }, { createElementVNode: Re, openBlock: Ne, createElementBlock: He } = __Context.vue, Ze = {
  fill: "currentColor",
  width: "19",
  height: "9",
  viewBox: "0 0 19 9",
  xmlns: "http://www.w3.org/2000/svg"
}, Fe = /* @__PURE__ */ Re("path", {
  d: "M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1H2ZM1 8H0V9H1V8ZM8 9C8.55228 9 9 8.55229 9 8C9 7.44771 8.55228 7 8 7V9ZM16.5963 7.42809C16.8327 7.92721 17.429 8.14016 17.9281 7.90374C18.4272 7.66731 18.6402 7.07103 18.4037 6.57191L16.5963 7.42809ZM16.9468 5.83205L17.8505 5.40396L16.9468 5.83205ZM0 1V8H2V1H0ZM1 9H8V7H1V9ZM1.66896 8.74329L6.66896 4.24329L5.33104 2.75671L0.331035 7.25671L1.66896 8.74329ZM16.043 6.26014L16.5963 7.42809L18.4037 6.57191L17.8505 5.40396L16.043 6.26014ZM6.65079 4.25926C9.67554 1.66661 14.3376 2.65979 16.043 6.26014L17.8505 5.40396C15.5805 0.61182 9.37523 -0.710131 5.34921 2.74074L6.65079 4.25926Z",
  fill: "currentColor"
}, null, -1), Te = [
  Fe
];
function Ue(c, l) {
  return Ne(), He("svg", Ze, [...Te]);
}
const De = { name: "defaults-left", render: Ue }, { createElementVNode: qe, openBlock: We, createElementBlock: Ie } = __Context.vue, Xe = {
  width: "1.5rem",
  height: "1.5rem",
  fill: "currentColor",
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  "stroke-width": "1.5",
  stroke: "currentColor",
  "aria-hidden": "true"
}, Ae = /* @__PURE__ */ qe("path", {
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  d: "M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"
}, null, -1), Ye = [
  Ae
];
function Pe(c, l) {
  return We(), Ie("svg", Xe, [...Ye]);
}
const je = { name: "defaults-full", render: Pe }, { createElementVNode: Ge, openBlock: Oe, createElementBlock: Je } = __Context.vue, Ke = {
  fill: "currentColor",
  t: "1708828335213",
  class: "icon",
  viewBox: "0 0 1098 1024",
  version: "1.1",
  xmlns: "http://www.w3.org/2000/svg",
  "p-id": "4230",
  width: "200",
  height: "200"
}, Qe = /* @__PURE__ */ Ge("path", {
  d: "M365.717333 329.152q0 45.717333-32 77.717333t-77.717333 32-77.717333-32-32-77.717333 32-77.717333 77.717333-32 77.717333 32 32 77.717333zM950.848 548.565333l0 256-804.565333 0 0-109.717333 182.848-182.848 91.434667 91.434667 292.565333-292.565333zM1005.717333 146.282667l-914.282667 0q-7.424 0-12.864 5.418667t-5.418667 12.864l0 694.848q0 7.424 5.418667 12.864t12.864 5.418667l914.282667 0q7.424 0 12.864-5.418667t5.418667-12.864l0-694.848q0-7.424-5.418667-12.864t-12.864-5.418667zM1097.152 164.565333l0 694.848q0 37.717333-26.858667 64.576t-64.576 26.858667l-914.282667 0q-37.717333 0-64.576-26.858667t-26.858667-64.576l0-694.848q0-37.717333 26.858667-64.576t64.576-26.858667l914.282667 0q37.717333 0 64.576 26.858667t26.858667 64.576z",
  fill: "#222222",
  "p-id": "4231"
}, null, -1), et = [
  Qe
];
function tt(c, l) {
  return Oe(), Je("svg", Ke, [...et]);
}
const nt = { name: "defaults-image", render: tt }, { defineComponent: ot } = __Context.vue, { renderSlot: st, normalizeStyle: lt, createElementVNode: at, openBlock: ct, createElementBlock: rt } = __Context.vue, { reactive: it, computed: dt, ref: j, onMounted: pt } = __Context.vue, ut = /* @__PURE__ */ ot({
  __name: "CanvasContainer",
  props: {
    imageSize: {}
  },
  setup(c, { expose: l }) {
    const r = c, _ = j(), g = j(), s = it({ x: 0, y: 0, scale: 1 }), L = dt(() => `transform-origin: 0 0; transform: translate(${s.x}px, ${s.y}px) scale(${s.scale})`), y = (n) => {
      n.preventDefault();
      let t = n.deltaY < 0 ? 1.1 : 0.9;
      const u = s.scale * t;
      u < 0.5 ? t = 0.5 / s.scale : u > 3 && (t = 3 / s.scale), s.scale *= t;
      const v = g.value.getBoundingClientRect(), f = n.clientX - v.left, S = n.clientY - v.top;
      s.x -= f * (t - 1), s.y -= S * (t - 1);
    };
    let x = !1;
    return pt(() => {
      if (!g.value)
        return;
      window.addEventListener("keydown", function(u) {
        u.code === "Space" && !x && (x = !0, g.value.style.cursor = "grabbing", document.addEventListener("mousemove", n), document.addEventListener("mouseup", t), document.addEventListener("keyup", t));
      });
      function n(u) {
        x && (s.x += u.movementX, s.y += u.movementY);
      }
      function t() {
        x && (x = !1, g.value.style.cursor = "grab", document.removeEventListener("mousemove", n), document.removeEventListener("mouseup", t), document.removeEventListener("keyup", t));
      }
    }), l({ resetScale: () => {
      if (s.scale = 1, s.x = 0, s.y = 0, !g.value)
        return;
      const [n, t] = r.imageSize, { width: u, height: v } = _.value.getBoundingClientRect(), f = u / n, S = v / t, b = Math.min(f, S) - 0.1;
      s.scale = b;
      const B = n * b, H = t * b;
      s.x = (n - B) / 2, s.y = (t - H) / 2;
    }, position: s }), (n, t) => (ct(), rt("div", {
      ref_key: "elRef",
      ref: _,
      class: "wh-full relative center",
      onWheel: y
    }, [
      at("div", {
        ref_key: "moveRef",
        ref: g,
        style: lt(L.value)
      }, [
        st(n.$slots, "default")
      ], 4)
    ], 544));
  }
}), { defineComponent: mt } = __Context.vue, { createElementVNode: G, vShow: _t, normalizeStyle: vt, withDirectives: ft, Fragment: ht, openBlock: gt, createElementBlock: wt } = __Context.vue, { ref: W, reactive: Ct, computed: xt } = __Context.vue, kt = /* @__PURE__ */ mt({
  __name: "CanvasLama",
  props: {
    src: {},
    size: {}
  },
  emits: ["recognize"],
  setup(c, { expose: l, emit: r }) {
    const _ = c, g = r, s = W(), L = W(!1), y = W(!1), x = Ct({ x: 0, y: 0 }), N = xt(() => `transform: translate(${x.x}px, ${x.y}px) `);
    let n, t, u = null;
    const v = document.createElement("canvas"), f = v.getContext("2d");
    v.style.display = "none", document.body.appendChild(v);
    const S = (a, d = "pic.jpg") => new Promise((k, w) => {
      const m = new XMLHttpRequest();
      m.open("GET", a), m.responseType = "blob", m.onload = function() {
        if (m.status === 200) {
          const i = m.response, Z = new File([i], d, { type: "image/webp" });
          k(Z);
        } else
          w(new Error("Failed to load blob data"));
      }, m.onerror = function() {
        w(new Error("XHR request failed"));
      }, m.send();
    }), b = (a) => {
      let d = a.split(","), k = d[0].match(/:(.*?);/)[1], w = atob(d[1]), m = w.length, i = new Uint8Array(m);
      for (; m--; )
        i[m] = w.charCodeAt(m);
      return { u8arr: i, mime: k };
    }, B = (a) => {
      try {
        t.lineWidth = a, f.lineWidth = a;
      } catch {
      }
    }, H = () => {
      let a = !1, d = 0, k = 0;
      n.addEventListener("mousedown", (i) => {
        a = !0, [d, k] = [i.offsetX, i.offsetY];
      });
      const w = (i, Z, q, p) => {
        i.globalCompositeOperation = L.value ? "destination-out" : "source-over", i.save(), i.beginPath(), i.moveTo(Z, q), i.lineTo(p.offsetX, p.offsetY), i.stroke(), i.restore();
      };
      n.addEventListener("mousemove", (i) => {
        a && (w(t, d, k, i), w(f, d, k, i), [d, k] = [i.offsetX, i.offsetY]);
      });
      const m = () => {
        a && (u && clearTimeout(u), u = setTimeout(() => g("recognize"), 3e3), a = !1);
      };
      n.addEventListener("mouseup", m), n.addEventListener("mouseout", m);
    }, D = () => {
      n.addEventListener("mouseenter", () => y.value = !0), n.addEventListener("mouseleave", () => y.value = !1), n.addEventListener("mousedown", () => y.value = !1), n.addEventListener("mousemove", (a) => {
        const d = _.size / 2;
        x.x = a.offsetX - d, x.y = a.offsetY - d;
      });
    };
    return l({ initCanvas: (a, d) => {
      v.width = a, v.height = d, f.fillRect(0, 0, a, d), f.fillStyle = "#000000", f.lineCap = "round", f.lineJoin = "round", f.lineWidth = 20, f.fillStyle = "white", f.strokeStyle = "white", n = s.value, t = n.getContext("2d"), n.width = a, n.height = d, t.lineCap = "round", t.lineJoin = "round", t.lineWidth = 20, t.fillStyle = "rgba(64, 204, 51)", t.strokeStyle = "rgba(64, 204, 51)", H(), D();
    }, setLineWidth: B, getFiles: async () => {
      const a = await S(_.src), d = v.toDataURL("image/png"), k = b(d), w = new File([k.u8arr], "blob", { type: "image/png" });
      return [a, w];
    } }), (a, d) => (gt(), wt(ht, null, [
      G("canvas", {
        ref_key: "canvasRef",
        ref: s,
        class: "custom-cursor1 opacity-50"
      }, null, 512),
      ft(G("div", {
        class: "absolute left-0 top-0 z-50 rounded-full pointer-events-none",
        style: vt(["background: rgba(64, 204, 51, 0.5)", `width: ${a.size}px; height: ${a.size}px`, N.value])
      }, null, 4), [
        [_t, y.value]
      ])
    ], 64));
  }
}), { defineComponent: $t } = __Context.vue, { vShow: I, normalizeStyle: T, createElementVNode: h, withDirectives: U, unref: V, createVNode: C, normalizeClass: R, withCtx: M, vModelText: yt, resolveComponent: Et, openBlock: O, createBlock: Lt, createCommentVNode: St, createElementBlock: bt, pushScopeId: Bt, popScopeId: Mt } = __Context.vue, te = (c) => (Bt("data-v-d98fa39c"), c = c(), Mt(), c), zt = ["src"], Vt = ["src"], Rt = { class: "absolute inset-0 center" }, Nt = ["for"], Ht = /* @__PURE__ */ te(() => /* @__PURE__ */ h("div", { class: "wh-full rounded center border-2 border-dashed hover:bg-gray-100" }, "点击这里或拖动图像文件", -1)), Zt = ["id"], Ft = { class: "absolute left-1/2 -translate-x-1/2 bottom-5 rounded-md border p1 w-auto bg-white shadow" }, Tt = { class: "flex space-x-2 items-center px4" }, Ut = { class: "min-w30 h-full center" }, Dt = /* @__PURE__ */ te(() => /* @__PURE__ */ h("span", { class: "w-50" }, "笔刷", -1)), qt = { class: "flex" }, { request: Wt } = __Context.utils, { ref: $, reactive: It, computed: J, nextTick: Xt } = __Context.vue, { useRefHistory: At, useConfig: Yt } = __Context.hooks, Pt = /* @__PURE__ */ $t({
  __name: "Main",
  setup(c) {
    const l = $("image_file_" + Math.random().toString().slice(3)), r = $(""), _ = $(40), g = $(!1), s = $(!1), L = $(!1), y = $(), x = $(), N = $([0, 0]), n = $(), t = $(), u = $(), v = It({ width: "0px", height: "0px" }), { undo: f, redo: S, clear: b, canUndo: B, canRedo: H, history: D } = At(r, {}), X = J(() => {
      const p = D.value.map((o) => o.snapshot).filter((o) => o);
      return p[p.length - 1];
    }), A = Yt(), a = J(() => A.config["lama.url"]), d = (p) => new Promise((o) => {
      const e = new Image();
      e.onload = () => o({ width: e.width, height: e.height }), e.src = p;
    }), k = () => {
      u.value.setLineWidth(_.value);
    }, w = (p = !1) => {
      d(r.value).then(({ width: o, height: e }) => {
        v.width = o + "px", v.height = e + "px", N.value = [o, e], u.value.initCanvas(o, e), u.value.setLineWidth(_.value), p && Xt().then(() => t.value.resetScale());
      });
    }, m = (p) => {
      const o = Array.from(p.target.files);
      if (o.length === 0)
        return;
      const e = o[0];
      r.value = URL.createObjectURL(e), b(), w(!0);
    }, i = () => {
      t.value.resetScale();
    }, Z = async () => {
      const [p, o] = await u.value.getFiles(), e = new FormData();
      e.append("image", p), e.append("mask", o), e.append("ldmSteps", "25"), e.append("ldmSampler", "plms"), e.append("zitsWireframe", "true"), e.append("hdStrategy", "Crop"), e.append("hdStrategyCropMargin", "196"), e.append("hdStrategyCropTrigerSize", "800"), e.append("hdStrategyResizeLimit", "2048"), e.append("prompt", ""), e.append("negativePrompt", "0"), e.append("croperX", "-52"), e.append("croperY", "-52"), e.append("croperWidth", "512"), e.append("croperHeight", "512"), e.append("useCroper", "false"), e.append("sdMaskBlur", "5"), e.append("sdStrength", "0.75"), e.append("sdSteps", "50"), e.append("sdGuidanceScale", "7.5"), e.append("sdSampler", "uni_pc"), e.append("sdSeed", "-1"), e.append("sdMatchHistograms", "false"), e.append("sdScale", "1"), e.append("cv2Radius", "5"), e.append("cv2Flag", "INPAINT_NS"), e.append("paintByExampleSteps", "50"), e.append("paintByExampleGuidanceScale", "7.5"), e.append("paintByExampleSeed", "-1"), e.append("paintByExampleMaskBlur", "5"), e.append("paintByExampleMatchHistograms", "false"), e.append("p2pSteps", "50"), e.append("p2pImageGuidanceScale", "1.5"), e.append("p2pGuidanceScale", "7.5"), e.append("controlnet_conditioning_scale", "0.4"), e.append("controlnet_method", "control_v11p_sd15_canny"), g.value = !0, Wt(a.value, {
        method: "post",
        headers: { pragma: "no-cache", "cache-control": "no-cache" },
        data: e,
        responseType: "blob"
      }).then((E) => {
        r.value = URL.createObjectURL(E), w();
      }).finally(() => g.value = !1);
    }, q = () => {
      const p = document.createElement("a");
      p.href = r.value, p.download = Math.random().toString().slice(3) + ".jpg", document.body.appendChild(p), p.click(), document.body.removeChild(p);
    };
    return (p, o) => {
      var Y, P;
      const e = nt, E = Et("i-icon-tip"), ne = je, oe = De, se = Ve, le = ye, ae = fe;
      return O(), bt("div", {
        ref_key: "elRef",
        ref: y,
        class: "relative wh-full overflow-hidden"
      }, [
        U(h("div", {
          class: "absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 rounded-full pointer-events-none",
          style: T([
            "background: rgba(64, 204, 51, 0.5)",
            `width: ${_.value}px; height: ${_.value}px; transform: translate(-50%, -50%) scale(${((P = (Y = t.value) == null ? void 0 : Y.position) == null ? void 0 : P.scale) ?? 1})`
          ])
        }, null, 4), [
          [I, L.value]
        ]),
        C(ut, {
          imageSize: N.value,
          ref_key: "containerRef",
          ref: t
        }, {
          default: M(() => [
            h("div", {
              ref_key: "boxRef",
              ref: x,
              class: R(["relative overflow-hidden", { twinkle: g.value }]),
              style: T(v)
            }, [
              h("img", {
                src: r.value,
                class: "absolute inset-0 -z-0",
                style: T(`clip-path: inset(0px ${s.value ? 100 : 0}% 0px 0px); transition: clip-path 300ms cubic-bezier(0.4, 0, 0.2, 1) 0s`),
                draggable: "false"
              }, null, 12, zt),
              h("img", {
                src: X.value,
                class: "absolute inset-0 -z-20",
                draggable: "false"
              }, null, 8, Vt),
              U(h("div", {
                class: "absolute top-0 w2 bg-yellow-500 h-full",
                style: T(`left: ${s.value ? 0 : 102}%;transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0s`)
              }, null, 4), [
                [I, V(B)]
              ]),
              C(kt, {
                src: r.value,
                size: _.value,
                ref_key: "canvasLamaRef",
                ref: u,
                onRecognize: Z
              }, null, 8, ["src", "size"])
            ], 6)
          ]),
          _: 1
        }, 8, ["imageSize"]),
        U(h("div", Rt, [
          h("label", {
            for: l.value,
            class: "w-4/5 md:w-[600px] h-[150px]"
          }, [
            Ht,
            h("input", {
              ref_key: "inputFileRef",
              ref: n,
              class: "hidden",
              id: l.value,
              type: "file",
              accept: "image/png, image/jpeg",
              onChange: m
            }, null, 40, Zt)
          ], 8, Nt)
        ], 512), [
          [I, !r.value]
        ]),
        h("div", Ft, [
          h("div", Tt, [
            h("div", Ut, [
              Dt,
              U(h("input", {
                class: "range flex-1",
                "onUpdate:modelValue": o[0] || (o[0] = (z) => _.value = z),
                onMousedown: o[1] || (o[1] = (z) => L.value = !0),
                onMouseup: o[2] || (o[2] = (z) => L.value = !1),
                onChange: k,
                type: "range",
                step: "2",
                min: "10",
                max: "200"
              }, null, 544), [
                [yt, _.value]
              ])
            ]),
            h("div", qt, [
              r.value ? (O(), Lt(E, {
                key: 0,
                class: "center",
                onClick: o[3] || (o[3] = (z) => n.value.click())
              }, {
                default: M(() => [
                  C(e)
                ]),
                _: 1
              })) : St("", !0),
              C(E, {
                class: R(["center", { "pointer-events-none": !r.value }]),
                onClick: i
              }, {
                default: M(() => [
                  C(ne)
                ]),
                _: 1
              }, 8, ["class"]),
              C(E, {
                class: R(["center", { "pointer-events-none": !V(B) }]),
                onClick: V(f)
              }, {
                default: M(() => [
                  C(oe)
                ]),
                _: 1
              }, 8, ["class", "onClick"]),
              C(E, {
                class: R(["center", { "pointer-events-none": !V(H) }]),
                onClick: V(S)
              }, {
                default: M(() => [
                  C(se)
                ]),
                _: 1
              }, 8, ["class", "onClick"]),
              C(E, {
                class: R(["center", { "pointer-events-none": !V(B) }]),
                onMousedown: o[4] || (o[4] = (z) => s.value = !0),
                onMouseup: o[5] || (o[5] = (z) => s.value = !1)
              }, {
                default: M(() => [
                  C(le)
                ]),
                _: 1
              }, 8, ["class"]),
              C(E, {
                class: R(["center", { "pointer-events-none": !r.value }]),
                onClick: q
              }, {
                default: M(() => [
                  C(ae)
                ]),
                _: 1
              }, 8, ["class"])
            ])
          ])
        ])
      ], 512);
    };
  }
}), jt = (c, l) => {
  const r = c.__vccOpts || c;
  for (const [_, g] of l)
    r[_] = g;
  return r;
}, Gt = /* @__PURE__ */ jt(Pt, [["__scopeId", "data-v-d98fa39c"]]);
var K = { icon: "", name: "lama", description: "图片涂抹修复", version: "1.0.1" };
class Ot {
  constructor() {
    F(this, "icon", "");
    F(this, "name", K.name);
    F(this, "description", K.description);
    F(this, "isUninstallReload", !1);
  }
  install(l) {
    l.usePage({
      path: "/lama",
      name: "lama",
      meta: {
        title: "lama",
        content: "图片涂抹修复",
        icon: '<svg t="1708913507645" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5106" width="200" height="200"><path d="M819.2 128H204.8c-84.48 0-153.6 69.12-153.6 153.6v460.8c0 84.48 69.12 153.6 153.6 153.6h614.4c84.48 0 153.6-69.12 153.6-153.6V281.6c0-84.48-69.12-153.6-153.6-153.6z m-537.6 199.68c30.72 0 56.32 25.6 56.32 56.32 0 30.72-25.6 56.32-56.32 56.32-30.72 0-56.32-25.6-56.32-56.32 0-30.72 25.6-56.32 56.32-56.32z m496.64 71.68c-30.72 125.44-140.8 204.8-253.44 204.8-53.76 0-97.28 10.24-130.56 28.16-30.72 17.92-51.2 43.52-61.44 87.04-7.68 28.16-33.28 43.52-61.44 38.4-28.16-7.68-43.52-33.28-38.4-61.44 15.36-71.68 56.32-122.88 112.64-153.6 51.2-30.72 115.2-40.96 179.2-40.96 66.56 0 135.68-48.64 156.16-128 5.12-28.16 33.28-46.08 61.44-38.4 28.16 5.12 43.52 33.28 35.84 64z" fill="#000000" p-id="5107"></path></svg>',
        cache: !0
      },
      component: Gt
    }), l.useSetting("Lama", [
      { name: "url", label: "接口URL", type: "input", value: "", typeConfig: { placeholder: "如 http://lama.fyshark.com/inpaint" } }
    ]);
  }
  uninstall() {
  }
}
const Kt = new Ot();
export {
  Kt as default
};
